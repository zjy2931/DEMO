(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Text12Wx"],{1777:function(e,t,o){e.exports=o.p+"img/detail4.293f457d.png"},"188d":function(e,t,o){},"494c":function(e,t,o){"use strict";o("188d")},"58ab":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Text12Wx"},[n("img",{attrs:{src:"https://wm-front-common.oss-cn-beijing.aliyuncs.com/wm-front-landing-page-mobile-custom/assets/Scene/Text12/headerText.png",alt:""}}),n("div",{staticClass:"formPay"},[n("div",{staticClass:"tuikuan"},[e._v("- 开课3天不满意无条件退款 -")]),n("VanForm",{ref:"form",attrs:{"validate-first":"","show-error":!1,"show-error-message":!1},on:{submit:e.onSubmit,failed:e.showErrorMsg}},[n("VanField",{ref:"phone",attrs:{name:"phone",type:"tel",placeholder:"请填写手机号",rules:[{required:!0,message:"33003"},{pattern:e.phoneReg,message:"33004"}]},on:{input:e.onPhoneChange},scopedSlots:e._u([{key:"left-icon",fn:function(){return[n("span",{staticClass:"prefix"},[e._v(" +86 "),n("span",{staticClass:"icon"},[e._v("▼")])])]},proxy:!0}]),model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),n("VanField",{directives:[{name:"show",rawName:"v-show",value:e.isShowCode,expression:"isShowCode"}],ref:"code",attrs:{name:"code",type:"digit",placeholder:"请填写验证码",rules:[{required:!0,message:"33005"}]},scopedSlots:e._u([{key:"button",fn:function(){return[n("div",{staticClass:"code"},[n("CountDown",{ref:"formCount",attrs:{"before-send":e.beforeSend}})],1)]},proxy:!0}]),model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}}),n("div",{staticClass:"btn",on:{click:e.Msubmit}},[n("div",{staticClass:"submit"},[e._v("立即抢购")])])],1)],1),n("div",{staticClass:"line"}),n("RecentBuy2"),e._l(e.detailImg,(function(e,t){return n("img",{key:t,attrs:{src:o("a656")("./"+e+".png"),alt:""}})})),n("Footer",{attrs:{"local-key":e.localKey},on:{submit:e.submit12,submit199:e.submit199,finish:e.changeSn}}),n("Tips",{model:{value:e.showTips,callback:function(t){e.showTips=t},expression:"showTips"}}),n("StayDialog",{on:{cancel:e.cancel,confirm:e.confirm},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}})],2)},r=[],a=o("5530"),i=o("1da1"),s=(o("caad"),o("a9e3"),o("d3b7"),o("96cf"),{30009:{msg:"您已经学习过此课程",report:{current_page:location.href,module_ori:"表单错误模块",module_part:"106_toufang_lm_0464"}},30010:{msg:"您已购买过此课程",report:{current_page:location.href,module_ori:"表单错误模块",module_part:"106_toufang_lm_0465"}},30011:{msg:"您已购买过此课程",report:{current_page:location.href,module_ori:"表单错误模块",module_part:"106_toufang_lm_0466"}},30008:{msg:"该手机号被另一个微信绑定",report:{current_page:location.href,module_ori:"表单错误模块",module_part:"106_toufang_lm_0467"}},33002:{msg:"验证码有误,请重填",report:{current_page:location.href,module_ori:"表单错误模块",module_part:"106_toufang_lm_0463"}},33003:{msg:"请填写手机号",report:{current_page:location.href,module_ori:"表单错误模块",module_part:"106_toufang_lm_0460"}},33004:{msg:"手机号有误,请重新填",report:{current_page:location.href,module_ori:"表单错误模块",module_part:"106_toufang_lm_0461"}},33005:{msg:"请填写验证码",report:{current_page:location.href,module_ori:"表单错误模块",module_part:"106_toufang_lm_0462"}}}),c=o("ed08"),u=o("27c0"),l=o("0039"),m=o("6232"),f=o("d69a"),d=o("2f62"),p=o("cac5"),g=o("25a7"),h={components:{CountDown:m["a"],RecentBuy2:u["a"],Footer:l["a"],Tips:p["a"],StayDialog:g["a"]},data:function(){return{localKey:"Text12Wx",detailImg:["detail1","detail2","detail3","detail4"],swipeList:[],paytype:1,isShowCode:!1,form:{},showTips:!1,showDialog:!1}},beforeRouteEnter:function(e,t,o){return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["a"])({getTokenQuery:Object(a["a"])({},Object(c["e"])())});case 2:o();case 3:case"end":return e.stop()}}),e)})))()},computed:Object(a["a"])({},Object(d["d"])("user",["userInfo"])),created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:o=e.userInfo.id,e.$log.update({mid:o}),e.$log.click({module_ori:"基于页面",module_part:"106_toufang_lm_0453"}),n=localStorage.getItem(e.localKey),e.form={phone:localStorage.getItem("Text12Wx-phone"),code:localStorage.getItem("Text12Wx-code")},e.form.phone&&(e.isShowCode=!0),e.sn="0"===n?"PRODUCT_SN_199_WM_SITCOM":"PRODUCT_SN_12_WM_SITCOM",e.checkOrderInWx(),e.$wx.setShareData({title:"12天小白理财训练营",desc:"针对理财小白量身定制，通俗易懂。改变从现在开始!",imgUrl:"https://wm-front-common.oss-cn-beijing.aliyuncs.com/wm-front-ad-miniapp/logo.png",link:location.href}),e.getRecentBuy();case 10:case"end":return t.stop()}}),t)})))()},methods:{Msubmit:function(){this.$log.click({module_part:"106_toufang_lm_0454",module_ori:"中部【立即抢购】按钮"}),this.submit()},submit199:function(){this.$log.click({module_ori:"底部【立即报名】按钮",module_part:"106_toufang_lm_0457"}),this.submit()},submit12:function(){this.$log.click({module_ori:"底部【立即抢购】按钮",module_part:"106_toufang_lm_0456"}),this.submit()},submit:function(){this.$refs.form.submit()},confirm:function(){this.$log.click({module_part:"106_toufang_lm_0458",module_ori:"点击弹窗【立即抢购】按钮"}),this.submit()},cancel:function(){this.showDialog=!1,this.$log.click({module_part:"106_toufang_lm_0459",module_ori:"弹窗【放弃优惠】按钮"})},onPhoneChange:function(e){e.length>=11&&(this.isShowCode=!0)},changeSn:function(){this.sn="PRODUCT_SN_199_WM_SITCOM",this.showDialog=!1},getRecentBuy:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$apis.userOperator.getLatestUser();case 2:o=t.sent,e.swipeList=Object(c["a"])(o,2);case 4:case"end":return t.stop()}}),t)})))()},onSubmit:function(e){localStorage.setItem("Text12Wx-phone",this.form.phone),localStorage.setItem("Text12Wx-code",this.form.code),this.pay()},goSucccess:function(e){e=e||this.sn,console.log(e),this.$router.push({name:"QrcodeInWx",query:{productSn:e}})},beforeSend:function(e){var t=this;this.$log.click({module_ori:"【获取验证码】按钮",module_part:"106_toufang_lm_0455"}),this.$refs.form.validate("phone").then((function(o){e(),t.$apis.userOperator.getPhoneCode({phone:t.form.phone})})).catch((function(e){e={code:e.message},t.showMsg(e)}))},showMsg:function(e){var t=this,o=e.msg,n=e.code,r=e.data,a="确定";30009===e.code&&(a="查看老师"),this.$dialog({message:o||s[n].msg,confirmButtonText:a}).then((function(o){30009===n&&t.goSucccess(r.product_sn),[33004,33003].includes(Number(n))&&t.$refs.phone.focus(),[33002,33005].includes(Number(n))&&t.$refs.code.focus(),s[e.code]&&t.$log.click(s[e.code].report)}))},showErrorMsg:function(e){e={code:e.errors[0].message},this.showMsg(e)},checkOrderInWx:function(){var e=this;return this.$apis.payment.checkOrderInWx({product_sn:this.sn}).catch((function(t){return e.showMsg(t),Promise.reject(t)}))},checkOrderInWxInterval:function(){var e=this;this.$apis.payment.checkOrderInWx({product_sn:this.sn}).catch((function(t){var o=t.code,n=t.data;30009===o&&e.goSucccess(n.product_sn)}))},pay:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showDialog=!1,o=e.sn,e.$apis.payment.payInWx(Object(a["a"])(Object(a["a"])(Object(a["a"])({pay_type:2,pay_mode:3},Object(c["e"])()),e.form),{},{product_sn:o})).then((function(t){window.WeixinJSBridge.invoke("getBrandWCPayRequest",t,(function(t){"get_brand_wcpay_request:ok"===t.err_msg?e.goSucccess(o):(console.log("显示挽留弹框"),"PRODUCT_SN_12_WM_SITCOM"===o&&(e.showDialog=!0))}))})).catch((function(t){e.showMsg(t)}));case 3:case"end":return t.stop()}}),t)})))()}}},_=h,b=(o("494c"),o("2877")),w=Object(b["a"])(_,n,r,!1,null,"3f90d650",null);t["default"]=w.exports},8894:function(e,t,o){e.exports=o.p+"img/detail3.275bbdab.png"},"95b9":function(e,t,o){e.exports=o.p+"img/detail2.f5898680.png"},a656:function(e,t,o){var n={"./detail1.png":"b560","./detail2.png":"95b9","./detail3.png":"8894","./detail4.png":"1777"};function r(e){var t=a(e);return o(t)}function a(e){if(!o.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=a,e.exports=r,r.id="a656"},b560:function(e,t,o){e.exports=o.p+"img/detail1.b4ecc81c.png"},cac5:function(e,t,o){"use strict";var n=function(){var e=this,t=this,o=t.$createElement,n=t._self._c||o;return n("VanDialog",{attrs:{"show-confirm-button":!1,value:t.value},on:{input:function(t){return e.$emit("input",t)}}},[n("div",{staticClass:"tips"},[n("div",{staticClass:"title"},[t._v("很遗憾")]),n("div",{staticClass:"content"},[t._v(" 您已经是微淼实践课学员，暂不能购买 ")]),n("div",{staticClass:"btn",on:{click:function(e){return t.$emit("input",!1)}}},[t._v(" 我知道了 ")])])])},r=[],a={props:{value:{type:Boolean,default:!1}},methods:{confirm:function(){this.$emit("input",!1),this.$emit("confirm")},cancel:function(){this.$emit("input",!1),this.$emit("cancel")}}},i=a,s=(o("ee1d"),o("2877")),c=Object(s["a"])(i,n,r,!1,null,null,null);t["a"]=c.exports},d69a:function(e,t,o){"use strict";var n=o("1da1"),r=(o("96cf"),o("4360"));t["a"]=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var o,n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=t||{},n=o.notUserInfo,a=o.notWxConfig,i=o.getTokenQuery,!localStorage.getItem("wxauth")){e.next=4;break}return e.next=4,r["a"].dispatch("user/getToken",i);case 4:if(n||r["a"].state.user.userInfo){e.next=7;break}return e.next=7,r["a"].dispatch("user/getUserInfo");case 7:if(a||r["a"].state.user.wxConfig){e.next=10;break}return e.next=10,r["a"].dispatch("user/getWxConfig");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},e058:function(e,t,o){},ee1d:function(e,t,o){"use strict";o("e058")}}]);
//# sourceMappingURL=Text12Wx.4742016d.js.map