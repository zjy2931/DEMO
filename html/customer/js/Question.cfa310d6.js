(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Question"],{"0cb2":function(e,t,r){var n=r("7b0b"),a=Math.floor,i="".replace,s=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,o=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,c,u,l){var d=r+e.length,p=c.length,f=o;return void 0!==u&&(u=n(u),f=s),i.call(l,f,(function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(d);case"<":s=u[i.slice(1,-1)];break;default:var o=+i;if(0===o)return n;if(o>p){var l=a(o/10);return 0===l?n:l<=p?void 0===c[l-1]?i.charAt(1):c[l-1]+i.charAt(1):n}s=c[o-1]}return void 0===s?"":s}))}},"46a8":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"question",staticClass:"paper"},[r("div",{staticClass:"qlist paper-welcome"},[r("img",{staticClass:"qicon",attrs:{src:e.baseUrl+"questionPaper/qpIcon.png",alt:""}}),e._m(0)]),-1!==e.index?r("div",{ref:"list",staticClass:"questions"},[e._l(e.qList,(function(t,n){return r("TransitionGroup",{key:t.id,attrs:{name:"fade",mode:"out-in",tag:"div"}},[e.index>=n?r("div",{key:t.id,ref:t.id,refInFor:!0,staticClass:"qlist"},[r("img",{staticClass:"qicon",attrs:{src:e.baseUrl+"questionPaper/qpIcon.png",alt:""}}),r("div",{staticClass:"qstem"},[e._v(" "+e._s(n+1)+"、"+e._s(t.question))]),1===t.style?r("VanRadioGroup",{on:{change:function(r){return e.scrollNext(n,t.id)}},model:{value:t.answer,callback:function(r){e.$set(t,"answer",r)},expression:"item.answer"}},e._l(t.answer_list,(function(n,a){return r("VanRadio",{key:a,attrs:{name:n.key}},[r("div",{class:[t.answer===n.key?"active":"","opts"]},[e._v(" "+e._s(n.key)+"、"+e._s(n.desc)+" ")])])})),1):r("div",[r("VanDatetimePicker",{attrs:{title:t.answer||"请滑动选择",type:"year-month","min-date":e.minDate,"max-date":e.maxDate,formatter:e.formatter},on:{confirm:function(t){var r=arguments.length,a=Array(r);while(r--)a[r]=arguments[r];return e.userSelTime.apply(void 0,[n].concat(a))}},model:{value:e.uBornDay,callback:function(t){e.uBornDay=t},expression:"uBornDay"}})],1)],1):e._e()])})),e.index===e.qList.length?r("TransitionGroup",[r("div",{key:"rear",staticClass:"qlist paper-welcome"},[r("img",{staticClass:"qicon",attrs:{src:e.baseUrl+"questionPaper/qpIcon.png",alt:""}}),r("div",[e._v("正在为您匹配专属老师，请不要走开哦…")])])]):e._e(),r("p",{ref:"bottom",staticClass:"item"})],2):e._e(),r("img",{staticClass:"bgicon",attrs:{src:e.baseUrl+"questionPaper/bg.png",alt:""}}),e.index>-1?r("div",{staticClass:"progress"},e._l(e.qList,(function(e,t){return r("div",{key:t,class:[e.answer?"stepsactive":"","steps"]})})),0):e._e(),r("VanDialog",{staticClass:"dialog",attrs:{"show-confirm-button":!1,"close-on-click-overlay":!0},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[r("img",{attrs:{src:e.baseUrl+"questionPaper/dialog_bg1.png"}}),r("div",{staticClass:"dialog-content"},[e._v(" 小淼根据您的情况帮您【量身定制】专属课程，确定跳过么？ "),r("div",{staticClass:"dialog-sure btn",on:{click:e.goOnPage}},[e._v("继续问卷")]),r("div",{staticClass:"dialog-cancel",on:{click:e.goQrcodePage}},[e._v("跳过问卷")])])])],1)},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v(" Hi！欢迎加入微淼《小白理财训练营》，我是你理财路上的好朋友“小淼”，微淼已经帮助近千万学员普及财商知识。让我们互相了解一下吧，我会根据你的情况帮你"),r("span",{staticStyle:{color:"#1e66ed"}},[e._v("【量身定制】")]),e._v("专属课程！ ")])}],i=r("1da1"),s=(r("96cf"),r("a9e3"),r("b0c0"),r("ac1f"),r("5319"),r("d3b7"),r("25f0"),r("4de4"),r("d81d"),r("99af"),r("ed08")),o=r("4360"),c=r("d69a"),u=r("e102"),l={mixins:[u["a"]],data:function(){return{paperList:{A:44,B:45,C:46,D:47},abGroup:JSON.parse(localStorage.getItem("abGroup")),minDate:new Date(1920,1,1),maxDate:new Date(2021,1,1),uBornDay:new Date(1992,1,1),qList:[],index:null,questionnaire_no:Number(Object(s["e"])("pageid")),showDialog:!1,heartbeatTimes:12}},beforeRouteEnter:function(e,t,r){return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"Qrcode"===t.name&&r({name:"CheckPhone",replace:!0}),e.next=3,Object(c["a"])({getTokenQuery:Object(s["e"])()});case 3:return n=o["a"].state.user.userInfo||{},a=n.id,e.next=6,o["a"].dispatch("ABTest/getAbData",{domain:"mini_program",abKey:"question_test",whiteParam:a});case 6:i=e.sent,i.ab_group||r({name:"Qrcode",replace:!0}),localStorage.setItem("abGroup",JSON.stringify(i)),r((function(e){var t={alternate:JSON.stringify({mid:a,questionnaire_no:e.paperList[i.group]})};o["a"].$log.update(t)}));case 10:case"end":return e.stop()}}),e)})))()},watch:{index:{handler:function(e){var t=this;e===this.qList.length&&setTimeout((function(){t.$router.replace({name:"Qrcode"})}),3e3)},immediately:!0}},created:function(){this.getQList(),this.$log.show({current_page:location.href,module_ori:"基于页面",module_part:"106_tf_h5_00050"})},mounted:function(){var e=this;this.setHeartBeat();var t=document.querySelector("html");t.style.background="#f9f9f9",this.$on("userBack",(function(){e.showDialog=!0,e.$log.show({current_page:location.href,module_ori:"挽留弹窗显示",module_part:"106_tf_h5_00053"})}))},beforeDestroy:function(){this.heartbeat.stop()},methods:{goOnPage:function(){this.showDialog=!1,this.$log.click({current_page:location.href,module_ori:"提交选项",module_part:"106_tf_h5_00054"})},goQrcodePage:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$log.click({current_page:location.href,module_ori:"跳过选项",module_part:"106_tf_h5_00073"}),t.prev=1,t.next=4,e.$apis.question.postAnswer({questionnaire_no:e.questionnaire_no||e.paperList[e.abGroup.ab_group],skip_status:2});case 4:e.$router.replace({name:"Qrcode"}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()},userSelTime:function(e,t){this.qList[e].answer?this.$toast("您已选过出生年月，无法修改"):(this.qList[e].answer=new Date(t).getFullYear().toString(),this.scrollNext(e,this.qList[e].id))},formatter:function(e,t){return"year"===e?"".concat(t,"年"):t},scrollNext:function(e,t){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,r.submitAnswer(t);case 2:if(n.sent){n.next=4;break}return n.abrupt("return");case 4:if(r.index===e&&r.index!==r.qList.length){n.next=6;break}return n.abrupt("return");case 6:r.index++,r.scrollTo();case 8:case"end":return n.stop()}}),n)})))()},submitAnswer:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n={questionnaire_no:t.questionnaire_no||t.paperList[t.abGroup.ab_group],questionnaire_answer:t.qList.map((function(e){return{id:e.id,answer:e.answer}})).filter((function(t){return t.id===e}))},r.next=3,t.$apis.question.postAnswer(n);case 3:if(a=r.sent,t.$log.click({current_page:location.href,module_ori:"提交问卷",module_part:"106_tf_h5_00051"}),1e3===a[0].code){r.next=8;break}return t.$toast("".concat(a[0].id,":").concat(a[0].msg)),r.abrupt("return",!1);case 8:return r.abrupt("return",!0);case 9:case"end":return r.stop()}}),r)})))()},getQList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$apis.question.getQuestionList({questionnaire_no:e.questionnaire_no||e.paperList[e.abGroup.ab_group],need_answer_list:!0});case 3:return r=t.sent,n=r.question,a=void 0===n?[]:n,i=r.answer,s=void 0===i?[]:i,o=r.skip_status,(s.length||2===o)&&e.$router.replace({name:"Qrcode"}),e.qList=a,t.next=13,e.$nextTick();case 13:e.index=-1,setTimeout((function(){e.index=0,e.scrollTo()}),3e3),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](0),e.$toast(t.t0.msg);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))()},scrollTo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$log.show({current_page:location.href,module_ori:"基于页面",module_part:"106_tf_h5_00052"}),t.next=3,e.$nextTick();case 3:r=document.querySelectorAll(".qlist"),n=r[e.index].getBoundingClientRect(),window.scrollBy({top:n.top+n.height,behavior:"instant"});case 6:case"end":return t.stop()}}),t)})))()},setHeartBeat:function(){var e=this;this.heartbeat=this.$log.heartbeat({current_page:location.href,event:"heartbeat",module_ori:"时长埋点",module_part:"106_tf_h5_00055"},5e3,1),this.heartbeat.start(),setTimeout((function(){e.heartbeat.stop()}),5e3*(this.heartbeatTimes-1))}}},d=l,p=(r("fc7b"),r("2877")),f=Object(p["a"])(d,n,a,!1,null,"2e946f8a",null);t["default"]=f.exports},5319:function(e,t,r){"use strict";var n=r("d784"),a=r("d039"),i=r("825a"),s=r("50c4"),o=r("a691"),c=r("1d80"),u=r("8aa5"),l=r("0cb2"),d=r("14c3"),p=r("b622"),f=p("replace"),h=Math.max,g=Math.min,v=function(e){return void 0===e?e:String(e)},m=function(){return"$0"==="a".replace(/./,"$0")}(),_=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),b=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));n("replace",(function(e,t,r){var n=_?"$":"$0";return[function(e,r){var n=c(this),a=void 0==e?void 0:e[f];return void 0!==a?a.call(e,n,r):t.call(String(n),e,r)},function(e,a){if("string"===typeof a&&-1===a.indexOf(n)&&-1===a.indexOf("$<")){var c=r(t,this,e,a);if(c.done)return c.value}var p=i(this),f=String(e),m="function"===typeof a;m||(a=String(a));var _=p.global;if(_){var b=p.unicode;p.lastIndex=0}var w=[];while(1){var x=d(p,f);if(null===x)break;if(w.push(x),!_)break;var k=String(x[0]);""===k&&(p.lastIndex=u(f,s(p.lastIndex),b))}for(var q="",$=0,y=0;y<w.length;y++){x=w[y];for(var D=String(x[0]),S=h(g(o(x.index),f.length),0),C=[],L=1;L<x.length;L++)C.push(v(x[L]));var R=x.groups;if(m){var O=[D].concat(C,S,f);void 0!==R&&O.push(R);var T=String(a.apply(void 0,O))}else T=l(D,f,S,C,R,a);S>=$&&(q+=f.slice($,S)+T,$=S+D.length)}return q+f.slice($)}]}),!b||!m||_)},d27d:function(e,t,r){},d69a:function(e,t,r){"use strict";var n=r("1da1"),a=(r("96cf"),r("4360"));t["a"]=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t||{},n=r.notUserInfo,i=r.notWxConfig,s=r.getTokenQuery,!localStorage.getItem("wxauth")){e.next=4;break}return e.next=4,a["a"].dispatch("user/getToken",s);case 4:if(n||a["a"].state.user.userInfo){e.next=7;break}return e.next=7,a["a"].dispatch("user/getUserInfo");case 7:if(i||a["a"].state.user.wxConfig){e.next=10;break}return e.next=10,a["a"].dispatch("user/getWxConfig");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},e102:function(e,t,r){"use strict";var n={methods:{prevent_back:function(){var e=this,t=this.$route.fullPath;"hash"===this.$router.mode&&(t="#"+t),window.pushStateFun=function(){e.$emit("userBack")};var r={title:null,url:t};window.history.pushState(r,null,t),window.addEventListener("popstate",window.pushStateFun,!1)}},mounted:function(){this.$vnode&&this.$vnode.data.keepAlive||this.prevent_back()},activated:function(){this.prevent_back()},beforeRouteLeave:function(e,t,r){window.removeEventListener("popstate",window.pushStateFun,!1),r()}};t["a"]=n},fc7b:function(e,t,r){"use strict";r("d27d")}}]);
//# sourceMappingURL=Question.cfa310d6.js.map