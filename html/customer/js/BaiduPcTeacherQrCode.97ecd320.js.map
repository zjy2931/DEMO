{"version":3,"sources":["webpack:///./src/views/BaiduPcTeacherQrCode/components/BindPhone.vue?4eb2","webpack:///./src/components/CountDownBtn.vue?d7d8","webpack:///src/components/CountDownBtn.vue","webpack:///./src/components/CountDownBtn.vue?10bd","webpack:///./src/components/CountDownBtn.vue","webpack:///./src/helper/payConfig.js","webpack:///./src/helper/clickLog.js","webpack:///./src/assets/TeacherQrCode/phone-icon.png","webpack:///./src/assets/TeacherQrCode/payOver.png","webpack:///./src/helper/reg.js","webpack:///./src/views/BaiduPcTeacherQrCode/index.vue?41c0","webpack:///./src/views/BaiduPcTeacherQrCode/index.vue?7bf6","webpack:///./src/views/BaiduPcTeacherQrCode/components/BindPhone.vue?b0bc","webpack:///src/views/BaiduPcTeacherQrCode/components/BindPhone.vue","webpack:///./src/views/BaiduPcTeacherQrCode/components/BindPhone.vue?0963","webpack:///./src/views/BaiduPcTeacherQrCode/components/BindPhone.vue","webpack:///src/views/BaiduPcTeacherQrCode/index.vue","webpack:///./src/views/BaiduPcTeacherQrCode/index.vue?e70e","webpack:///./src/views/BaiduPcTeacherQrCode/index.vue","webpack:///./src/assets/TeacherQrCode/down.gif","webpack:///./src/helper/Auth/wxAuth.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","on","getPhoneCode","_v","_s","codeTime","staticRenderFns","props","getCodeSuccessBack","type","Function","default","getCodeErrorBack","phone","String","params","Object","data","timerObj","methods","component","postBack","location","protocol","host","hash","search","pathname","getSearch","link","clickLog","model","Store","$log","click","current_page","href","module_ori","module_part","module","exports","isPhone","message","test","staticClass","attrs","directives","name","rawName","value","options","logOptions","expression","arg","teacherCodeImg","hasBindPhone","_e","_m","$event","isBinding","style","height","callback","$$v","modifiers","domProps","target","composing","trim","$forceUpdate","code","submitBind","components","notUserInfo","notWxConfig","getTokenQuery","localStorage","getItem","dispatch","state","user","userInfo","wxConfig"],"mappings":"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","file":"js/BaiduPcTeacherQrCode.97ecd320.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BindPhone.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{on:{\"click\":_vm.getPhoneCode}},[_vm._v(\" \"+_vm._s(_vm.codeTime ? (_vm.codeTime + \"s\") : \"获取验证码\")+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <p @click=\"getPhoneCode\">\n    {{ codeTime ? `${codeTime}s` : \"获取验证码\" }}\n  </p>\n</template>\n\n<script>\nimport { isPhone } from '@/helper/reg'\n\nexport default {\n  props: {\n    getCodeSuccessBack: { // 验证码成功回调\n      type: Function,\n      default: null\n    },\n    getCodeErrorBack: { // 验证码失败回调\n      type: Function,\n      default: null\n    },\n    phone: { // 手机号\n      type: String,\n      default: ''\n    },\n    params: { // 发送验证码参数\n      type: Object,\n      default: () => ({})\n    }\n  },\n  data () {\n    return {\n      codeTime: 0, // 验证码倒计时\n      timerObj: 1 // 定时器对象\n    }\n  },\n  methods: {\n    /**\n     * @Date: 2020-12-29 11:16:53\n     * @author: zjs\n     * @description: 获取手机验证码\n     */\n    async getPhoneCode ({ successBack = this.getCodeSuccessBack, errorBack = this.getCodeErrorBack }) {\n      const { phone, codeTime } = this\n      if (codeTime) return\n      if (!isPhone(phone)) {\n        // 失败回调\n        typeof errorBack === 'function' && errorBack()\n        return\n      }\n      try {\n        this.codeTime = 60\n        // 倒计时\n        this.timerObj = setInterval(() => {\n          this.codeTime--\n          if (!this.codeTime)clearInterval(this.timerObj)\n        }, 1000)\n        // 获取验证码\n        await this.$apis.userOperator.getPhoneCode({\n          phone,\n          ...this.params\n        })\n        // 存获取验证码时间\n        localStorage.setItem('getCodeTime', new Date().getTime())\n        // 成功回调\n        typeof successBack === 'function' && successBack()\n      } catch (error) {\n        // 失败回调\n        typeof errorBack === 'function' && errorBack(error)\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CountDownBtn.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CountDownBtn.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CountDownBtn.vue?vue&type=template&id=dfaafc9a&\"\nimport script from \"./CountDownBtn.vue?vue&type=script&lang=js&\"\nexport * from \"./CountDownBtn.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { getSearch } from '@/utils'\n/**\n * @Date: 2021-1-12 11:23:49\n * @author: zw\n * @description: 回传相关参数\n * @param {*} phone\n * @param {*} message\n */\nexport function postBack () {\n  const { protocol, host, hash, search, pathname } = location\n  return {\n    ...getSearch(), // get参数,协议,域名,链接等参数用于回传\n    protocol,\n    host,\n    link: pathname + search + hash\n  }\n}\n","/**\n * @Date: 2020-12-31 16:12:22\n * @author: zjs\n * @description: 点击埋点\n */\nimport Store from '@/store'\n\nexport function clickLog (model) {\n  Store.$log.click({\n    current_page: location.href,\n    module_ori: model.module_ori,\n    module_part: model.module_part\n  })\n}\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAcCAMAAAA+9+1qAAAAhFBMVEUAAAD///+AgIBAQEBVVVUzMzM7Ozs2NjY6OjozMzM1NTU2NjY1NTU2NjY1NTU0NDQ2NjY0NDQ1NTU1NTU0NDQ1NTU0NDQ0NDQ0NDQ0NDQ0NDQ0NDQzMzM0NDQ0NDQzMzMzMzM0NDQ0NDQzMzM0NDQzMzMzMzM0NDQzMzM0NDQzMzMzMzOews9pAAAAK3RSTlMAAQIEBgoNExYZHSYrNDpFTFlgZWx5gI2UoaittMDG0NXe4urt8PP3+fz+airUxAAAAK1JREFUGBmFwYkWQlAABcArlBRFhRZE0XL///9y5Ci8ZQZnap2xrKhRLYEdNXYAjJRKqYHG6kGFxwqtAxUO+DJzSuUmOt6LEi8PvZgSMX7sgkKFjT8bCm0wcKTAEUOLGyduC4wEnAgwceHIBVNuzYHahcCeA3uIzDL+yWYQWj/Ze64hEbEXQca6snO1IOW/2Xr7UEjYSqAyL9ko51DasrGFxok8Qce53x1ohSHGPtYxVP8hArFRAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"img/payOver.e50777e8.png\";","import { Dialog } from 'vant'\n\n/**\n * @Date: 2020-12-29 11:23:49\n * @author: zjs\n * @description: 校验手机号\n * @param {*} phone\n * @param {*} message\n */\nfunction isPhone (phone, message = '手机号码有误，请重填') {\n  if (!phone) {\n    Dialog({ message: '请填写手机号' })\n    return false\n  }\n  if (!(/^[1]([3-9])[0-9]{9}$/.test(phone))) {\n    Dialog({ message })\n    return false\n  }\n  return true\n}\nexport {\n  isPhone\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-teacherQrCode\"},[_c('BindPhone'),_c('div',{staticClass:\"static-box mt__50\"},[_c('img',{staticClass:\"static-img\",attrs:{\"src\":require('@/assets/TeacherQrCode/payOver.png')}}),_c('div',{staticClass:\"ml__10\"},[_vm._v(\"已付款\")])]),_c('div',{staticClass:\"mt__20 git-box\"},[_c('img',{attrs:{\"src\":require('@/assets/TeacherQrCode/down.gif')}})]),_c('div',{staticClass:\"content-title mt__20\"},[_vm._v(\"请务必扫码添加, 否则无法上课\")]),_c('div',{directives:[{name:\"log\",rawName:\"v-log:long\",value:({options:_vm.logOptions}),expression:\"{options:logOptions}\",arg:\"long\"}],staticClass:\"qrCode-box\"},[_c('img',{attrs:{\"src\":_vm.teacherCodeImg}})]),_c('div',{staticClass:\"qrCode-text\"},[_vm._v(\"长按识别二维码, 添加老师微信\")]),_c('div',{staticClass:\"qrCode-topic\"},[_vm._v(\"*老师会在24小时内通过好友申请, 不会影响上课\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"phone-box\"},[(!_vm.hasBindPhone)?[_vm._m(0),_c('div',{staticClass:\"ml__40 mt__30 btn__bind\",on:{\"click\":function($event){_vm.isBinding = true}}},[_vm._v(\" 立即绑定 \")])]:_vm._e(),_c('VanPopup',{staticClass:\"pb__40\",style:({ height: 'auto' }),attrs:{\"closeable\":\"\",\"close-icon\":\"close\",\"position\":\"top\",\"round\":\"\"},model:{value:(_vm.isBinding),callback:function ($$v) {_vm.isBinding=$$v},expression:\"isBinding\"}},[_c('div',{staticClass:\"bind-title\"},[_vm._v(\"请输入手机号以便接收课程信息\")]),_c('div',{staticClass:\"popup-item mt__30\"},[_c('div',{staticClass:\"label\"},[_vm._v(\" +86 \"),_c('img',{attrs:{\"src\":require('@/assets/TeacherQrCode/phone-icon.png'),\"alt\":\"\"}})]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.phone),expression:\"phone\",modifiers:{\"trim\":true}}],attrs:{\"placeholder\":\"请输入手机号\"},domProps:{\"value\":(_vm.phone)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.phone=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{staticClass:\"popup-item__code pl__150\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.code),expression:\"code\",modifiers:{\"trim\":true}}],attrs:{\"placeholder\":\"请输入验证码\"},domProps:{\"value\":(_vm.code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.code=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('CountDownBtn',{staticClass:\"phone-code\",attrs:{\"phone\":_vm.phone,\"get-code-success-back\":_vm.getCodeSuccessBack}})],1),_c('div',{staticClass:\"bind-topic mt__40\"},[_vm._v(\"* 如长时间收不到验证码 *\")]),_c('div',{staticClass:\"bind-topic mt__10\"},[_vm._v(\" 可点击右上角关闭，添加老师微信后再绑定 \")]),_c('div',{staticClass:\"bind-btn\",on:{\"click\":_vm.submitBind}},[_vm._v(\"提交\")])]),(_vm.hasBindPhone)?[_c('div',{staticClass:\"bind__phone phone-title\"},[_vm._v(\"您当前绑定手机号为：\"+_vm._s(_vm.phone))])]:_vm._e()],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ml__90 mt__30\"},[_c('div',{staticClass:\"phone-title\"},[_vm._v(\"您当前还未绑定手机号\")]),_c('div',{staticClass:\"phone-desc\"},[_vm._v(\"绑定手机号用于接收课程信息\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- 绑定手机号盒子 -->\r\n  <div class=\"phone-box\">\r\n    <!-- 未绑定 -->\r\n    <template v-if=\"!hasBindPhone\">\r\n      <div class=\"ml__90 mt__30\">\r\n        <div class=\"phone-title\">您当前还未绑定手机号</div>\r\n        <div class=\"phone-desc\">绑定手机号用于接收课程信息</div>\r\n      </div>\r\n      <div class=\"ml__40 mt__30 btn__bind\" @click=\"isBinding = true\">\r\n        立即绑定\r\n      </div>\r\n    </template>\r\n    <!-- 绑定 -->\r\n    <VanPopup\r\n      v-model=\"isBinding\"\r\n      closeable\r\n      close-icon=\"close\"\r\n      position=\"top\"\r\n      round\r\n      class=\"pb__40\"\r\n      :style=\"{ height: 'auto' }\">\r\n      <div class=\"bind-title\">请输入手机号以便接收课程信息</div>\r\n      <div class=\"popup-item mt__30\">\r\n        <div class=\"label\">\r\n          +86\r\n          <img :src=\"require('@/assets/TeacherQrCode/phone-icon.png')\" alt=\"\" />\r\n        </div>\r\n        <input v-model.trim=\"phone\" placeholder=\"请输入手机号\" />\r\n      </div>\r\n      <div class=\"popup-item__code pl__150\">\r\n        <input v-model.trim=\"code\" placeholder=\"请输入验证码\" />\r\n        <CountDownBtn\r\n          class=\"phone-code\"\r\n          :phone=\"phone\"\r\n          :get-code-success-back=\"getCodeSuccessBack\"></CountDownBtn>\r\n      </div>\r\n      <div class=\"bind-topic mt__40\">* 如长时间收不到验证码 *</div>\r\n      <div class=\"bind-topic mt__10\">\r\n        可点击右上角关闭，添加老师微信后再绑定\r\n      </div>\r\n      <div class=\"bind-btn\" @click=\"submitBind\">提交</div>\r\n    </VanPopup>\r\n    <!-- 绑定成功 -->\r\n    <template v-if=\"hasBindPhone\">\r\n      <div class=\"bind__phone phone-title\">您当前绑定手机号为：{{ phone }}</div>\r\n    </template>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { Toast, Dialog } from 'vant'\r\nimport Store from '@/store'\r\nimport { clickLog } from '@/helper/clickLog'\r\nimport CountDownBtn from '@/components/CountDownBtn'\r\nimport wxAuth from '@/helper/Auth/wxAuth'\r\nimport { postBack } from '@/helper/payConfig'\r\nimport { isPhone } from '@/utils'\r\n\r\nexport default {\r\n  name: 'BindPhone',\r\n  components: { CountDownBtn },\r\n  data () {\r\n    return {\r\n      phone: '', // 手机号\r\n      code: '', // 验证码\r\n      isBinding: false, // 是否显示绑定弹窗\r\n      hasBindPhone: false // 是否显示绑定弹窗\r\n    }\r\n  },\r\n  async created () {\r\n    // 获取微信授权\r\n    await wxAuth({ getTokenQuery: postBack() })\r\n    const { mobile } = Store.state.user.userInfo || {}\r\n    this.phone = mobile\r\n    this.hasBindPhone = !!mobile\r\n    this.isBinding = !mobile\r\n  },\r\n  methods: {\r\n    /**\r\n     * @Date: 2021-01-05 15:56:58\r\n     * @author: zjs\r\n     * @description: 绑定手机号\r\n     */\r\n    async submitBind () {\r\n      clickLog({ module_ori: '表单模块', module_part: '106_toufang_lcx_0134' })\r\n      const { phone, code } = this\r\n      if (!isPhone(phone)) {\r\n        Dialog({ message: '手机号码有误，请重填' })\r\n        return\r\n      }\r\n      if (!code) {\r\n        Dialog({ message: '请输入手机号验证码' })\r\n        return\r\n      }\r\n      await this.$apis.baiduPcPayOrder.bindPhone({\r\n        phone,\r\n        code\r\n      })\r\n      this.isBinding = false\r\n      this.hasBindPhone = true\r\n      Toast('绑定成功')\r\n    },\r\n    /**\r\n     * @Date: 2021-01-05 15:56:58\r\n     * @author: zjs\r\n     * @description: 手机验证码成功回调\r\n     */\r\n    getCodeSuccessBack () {\r\n      clickLog({ module_ori: '表单模块', module_part: '106_toufang_lcx_0133' })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n// 电话盒子\r\n.phone-box {\r\n  width: 100%;\r\n  padding-bottom: 30px;\r\n  background: #ffffff;\r\n  box-shadow: 0px 4px 30px 0px rgba(58, 58, 82, 0.4);\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  .bind-title {\r\n    margin-top: 55px;\r\n    font-size: 38px;\r\n    font-weight: 600;\r\n    color: #333333;\r\n    text-align: center;\r\n  }\r\n  .bind-btn {\r\n    @include horVerCenter;\r\n    width: 678px;\r\n    height: 94px;\r\n    background: #ff4343;\r\n    border-radius: 8px;\r\n    font-size: 36px;\r\n    font-weight: 500;\r\n    color: #ffffff;\r\n    margin: 73px auto 0;\r\n  }\r\n  .popup-item {\r\n    display: flex;\r\n    align-items: center;\r\n    width: calc(100% - 72px);\r\n    margin-left: 36px;\r\n    font-size: 34px;\r\n    font-weight: 500;\r\n    height: 110px;\r\n    padding-left: 38px;\r\n    box-shadow: 0px 1px 0px 0px rgba(231, 231, 231, 1);\r\n    .label {\r\n      width: 130px;\r\n    }\r\n    input {\r\n      border: 0;\r\n    }\r\n    img {\r\n      width: 18px;\r\n      height: 14px;\r\n      margin-left: 10px;\r\n      margin-right: 30px;\r\n    }\r\n    input::placeholder {\r\n      font-size: 34px;\r\n      color: #999999;\r\n    }\r\n  }\r\n  .popup-item__code {\r\n    @extend .popup-item;\r\n    padding-left: 168px !important;\r\n    input {\r\n      width: 300px;\r\n    }\r\n    .phone-code {\r\n      @include horVerCenter;\r\n      width: 250px;\r\n      height: 77px;\r\n      background: #fff4f4;\r\n      border-radius: 42px;\r\n      font-size: 32px;\r\n      font-weight: 500;\r\n      color: #ff4343;\r\n    }\r\n  }\r\n  .bind-topic {\r\n    font-size: 30px;\r\n    font-weight: 400;\r\n    color: #ff4343;\r\n    text-align: center;\r\n  }\r\n\r\n  .phone-title {\r\n    font-size: 34px;\r\n    font-weight: 600;\r\n    color: #f62724;\r\n  }\r\n  .phone-desc {\r\n    font-size: 26px;\r\n    font-weight: 400;\r\n    color: #3a3a52;\r\n    margin-top: 5px;\r\n  }\r\n  .btn__bind {\r\n    @include horVerCenter;\r\n    width: 220px;\r\n    height: 68px;\r\n    background: #3a3a52;\r\n    border-radius: 34px;\r\n    font-size: 36px;\r\n    font-weight: 500;\r\n    color: #ffffff;\r\n  }\r\n  .bind__phone {\r\n    @include horVerCenter;\r\n    margin-top: 30px;\r\n    width: 100%;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BindPhone.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BindPhone.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BindPhone.vue?vue&type=template&id=cac8668a&\"\nimport script from \"./BindPhone.vue?vue&type=script&lang=js&\"\nexport * from \"./BindPhone.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BindPhone.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"page-teacherQrCode\">\n    <BindPhone></BindPhone>\n    <!-- 底部内容 -->\n    <div class=\"static-box mt__50\">\n      <img\n        class=\"static-img\"\n        :src=\"require('@/assets/TeacherQrCode/payOver.png')\" />\n      <div class=\"ml__10\">已付款</div>\n    </div>\n    <div class=\"mt__20 git-box\">\n      <img :src=\"require('@/assets/TeacherQrCode/down.gif')\" />\n    </div>\n    <div class=\"content-title mt__20\">请务必扫码添加, 否则无法上课</div>\n    <!-- 二维码 -->\n    <div v-log:long=\"{options:logOptions}\" class=\"qrCode-box\">\n      <img :src=\"teacherCodeImg\" />\n    </div>\n    <div class=\"qrCode-text\">长按识别二维码, 添加老师微信</div>\n    <div class=\"qrCode-topic\">*老师会在24小时内通过好友申请, 不会影响上课</div>\n  </div>\n</template>\n\n<script>\nimport BindPhone from './components/BindPhone'\nimport Store from '@/store'\nimport wxAuth from '@/helper/Auth/wxAuth'\nimport { postBack } from '@/helper/payConfig'\n\nexport default {\n  components: { BindPhone },\n  data () {\n    return {\n      teacherCodeImg: '', // 老师二维码\n      logOptions: {\n        // 长按埋点信息\n        current_page: location.href,\n        module_ori: '老师二维模块',\n        module_part: '106_toufang_lcx_0132'\n      }\n    }\n  },\n  async beforeRouteEnter (to, from, next) {\n    try {\n      // 获取微信授权\n      await wxAuth({ getTokenQuery: postBack() })\n      await Store.$apis.payment.checkOrderInWx()\n      if (from.name === 'BaiduPcPayOrder') {\n        return next({ name: 'BaiduPcPayOrder', replace: true })\n      }\n    } catch (error) {\n      console.error(error)\n    } finally {\n      next()\n    }\n  },\n  async created () {\n    wx.ready(() => {\n      wx.hideAllNonBaseMenuItem()\n    })\n    // 获取二维码\n    const result = await this.$apis.baiduPcPayOrder.getClassQr({\n      product_sn: 'PRODUCT_SN_XIAOBAI_12'\n    })\n    this.teacherCodeImg = result.qr_url\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.page-teacherQrCode {\n  // 付款盒子\n  .static-box {\n    @include horVerCenter;\n    .static-img {\n      width: 49px;\n      height: 53px;\n    }\n    div {\n      font-size: 36px;\n      font-weight: 400;\n      color: #3a3a52;\n    }\n  }\n  .git-box {\n    @include horVerCenter;\n    img {\n      width: 35px;\n      height: 35px;\n    }\n  }\n  // 内容标题\n  .content-title {\n    @include horVerCenter;\n    font-size: 36px;\n    font-weight: 500;\n    color: #f62724;\n  }\n  .qrCode-box {\n    margin: 30px auto;\n    width: 30vw;\n    height: 30vw;\n    img {\n      width: 100%;\n      height: 100%;\n    }\n  }\n  .qrCode-text {\n    text-align: center;\n    font-size: 26px;\n    font-weight: 400;\n    color: #787878;\n  }\n  .qrCode-topic {\n    margin: 52px auto;\n    width: calc(100% - 150px);\n    height: 50px;\n    background: #ffeaea;\n    opacity: 0.8;\n    border-radius: 25px;\n    font-size: 24px;\n    font-weight: 400;\n    color: #f62724;\n    @include horVerCenter;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1cf84d1f&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/down.6864b235.gif\";","/**\n * @Date: 2021-01-14 20:38:58\n * @author: zjs\n * @description: 微信内的授权\n */\nimport Store from '@/store'\n\nexport default async (model) => {\n  const { notUserInfo, notWxConfig, getTokenQuery } = model || {}\n  // 换token\n  if (localStorage.getItem('wxauth')) {\n    await Store.dispatch('user/getToken', getTokenQuery)\n  }\n  // 获取用户信息\n  if (!notUserInfo && !Store.state.user.userInfo) {\n    await Store.dispatch('user/getUserInfo')\n  }\n  // 不存在微信授权信息，获取授权信息\n  if (!notWxConfig && !Store.state.user.wxConfig) {\n    await Store.dispatch('user/getWxConfig')\n  }\n}\n"],"sourceRoot":""}