(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["GDTImmortal"],{"0151":function(e,t,r){"use strict";r("c9cf")},"0cb2":function(e,t,r){var n=r("7b0b"),a=Math.floor,c="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,i=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,u,s,d){var l=r+e.length,p=u.length,f=i;return void 0!==s&&(s=n(s),f=o),c.call(d,f,(function(n,c){var o;switch(c.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(l);case"<":o=s[c.slice(1,-1)];break;default:var i=+c;if(0===i)return n;if(i>p){var d=a(i/10);return 0===d?n:d<=p?void 0===u[d-1]?c.charAt(1):u[d-1]+c.charAt(1):n}o=u[i-1]}return void 0===o?"":o}))}},2744:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-GDTBaseImgPage"},[e._l(e.maxImg,(function(t,n){return r("img",{key:n,attrs:{src:e.imgPath+"/"+(n+1)+".jpg"}})})),e._t("default")],2)},a=[],c=(r("a9e3"),{props:{maxImg:{type:Number,default:0},imgPath:{type:String,default:""}}}),o=c,i=(r("649f"),r("2877")),u=Object(i["a"])(o,n,a,!1,null,null,null);t["a"]=u.exports},"4f6c":function(e,t,r){"use strict";r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return m})),r.d(t,"d",(function(){return h})),r.d(t,"a",(function(){return v}));var n=r("5530"),a=r("1da1"),c=(r("96cf"),r("caad"),r("ac1f"),r("5319"),r("d3b7"),r("4360")),o=r("a18c"),i=r("5d86"),u=r("ed08"),s={PRODUCT_SN_XIAOBAI_12:"SuccessEnrollWM",PRODUCT_SN_XIAOBAI_7:"SuccessEnrollWM",PRODUCT_SN_XIAOBAI_1:"SuccessEnrollMH",PRODUCT_SN_XIAOBAI_0:"SuccessEnrollMH"},d=[30006,30009];function l(e){var t=e.code,r=e.data;return d.includes(t)&&s[r.product_sn]?(localStorage.setItem("guide_order_num",r.order_num),o["a"].replace({name:"Officals"}),t):t}function p(e){return f.apply(this,arguments)}function f(){return f=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=localStorage.getItem("buyPhone"),n=t||r,Object(u["g"])(n)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,c["a"].$apis.payment.checkOrder({phone:n}).catch((function(e){return l(e),Promise.reject(e)}));case 6:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function m(e){return g.apply(this,arguments)}function g(){return g=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,c,o,i,u,s,d,l,p,f,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t||{},n=r.apiQuery,a=r.successBack,c=r.payOverBack,o=r.errorBack,e.prev=1,"function"===typeof a&&a(),i=n.phone,u=n.code,s=n.paytype,localStorage.setItem("buyPhone",i),localStorage.setItem("guide_phone",i),localStorage.setItem("code",u),localStorage.setItem("payType",s),localStorage.setItem("lastPayQuery",JSON.stringify(n)),e.next=11,this.$apis.payment.pay(n);case 11:d=e.sent,l=d.url,l?(localStorage.setItem("backDialogMark",!0),this.$store.commit("ABTest/SET_BACK_DIALOG_MARK",!0),"function"===typeof c&&c(),location.href=decodeURIComponent(l)):("function"===typeof c&&c(),localStorage.setItem("backDialogMark",!0),this.$store.commit("ABTest/SET_BACK_DIALOG_MARK",!0),p=document.getElementById("aLiPay"),p&&p.parentNode.removeChild(p),f=document.createElement("div"),f.id="aLiPay",f.innerHTML=d,document.body.appendChild(f),document.forms[0].submit()),e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](1),m=e.t0.data,"function"===typeof o&&o(m);case 20:case"end":return e.stop()}}),e,this,[[1,16]])}))),g.apply(this,arguments)}function h(e){return b.apply(this,arguments)}function b(){return b=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,r=t.phone,n=t.code,Object(u["g"])(r)){e.next=4;break}return e.abrupt("return",Promise.reject({code:33001,msg:"手机号有误，请重填"}));case 4:return e.next=6,c["a"].$apis.userOperator.phoneCheckCode({phone:r,code:n});case 6:return e.next=8,c["a"].$apis.payment.checkOrderInWx();case 8:e.next=13;break;case 10:return e.prev=10,e.t0=e["catch"](0),e.abrupt("return",Promise.reject(e.t0.data));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),b.apply(this,arguments)}function v(e){return x.apply(this,arguments)}function x(){return x=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].$apis.payment.payInWx(Object(n["a"])(Object(n["a"])({pay_type:2,pay_mode:3},t),Object(i["a"])()));case 3:return r=e.sent,e.abrupt("return",new Promise((function(e){window.WeixinJSBridge.invoke("getBrandWCPayRequest",r,(function(t){e(t.err_msg)}))})));case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",Promise.reject(e.t0.data));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),x.apply(this,arguments)}},5319:function(e,t,r){"use strict";var n=r("d784"),a=r("d039"),c=r("825a"),o=r("50c4"),i=r("a691"),u=r("1d80"),s=r("8aa5"),d=r("0cb2"),l=r("14c3"),p=r("b622"),f=p("replace"),m=Math.max,g=Math.min,h=function(e){return void 0===e?e:String(e)},b=function(){return"$0"==="a".replace(/./,"$0")}(),v=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),x=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));n("replace",(function(e,t,r){var n=v?"$":"$0";return[function(e,r){var n=u(this),a=void 0==e?void 0:e[f];return void 0!==a?a.call(e,n,r):t.call(String(n),e,r)},function(e,a){if("string"===typeof a&&-1===a.indexOf(n)&&-1===a.indexOf("$<")){var u=r(t,this,e,a);if(u.done)return u.value}var p=c(this),f=String(e),b="function"===typeof a;b||(a=String(a));var v=p.global;if(v){var x=p.unicode;p.lastIndex=0}var _=[];while(1){var k=l(p,f);if(null===k)break;if(_.push(k),!v)break;var y=String(k[0]);""===y&&(p.lastIndex=s(f,o(p.lastIndex),x))}for(var O="",w=0,I=0;I<_.length;I++){k=_[I];for(var S=String(k[0]),j=m(g(i(k.index),f.length),0),C=[],B=1;B<k.length;B++)C.push(h(k[B]));var P=k.groups;if(b){var R=[S].concat(C,j,f);void 0!==P&&R.push(P);var T=String(a.apply(void 0,R))}else T=d(S,f,j,C,P,a);j>=w&&(O+=f.slice(w,j)+T,w=j+S.length)}return O+f.slice(w)}]}),!x||!b||v)},"54b4":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",{on:{click:e.getPhoneCode}},[e._v(" "+e._s(e.codeTime?e.codeTime+"s":"获取验证码")+" ")])},a=[],c=r("5530"),o=r("1da1"),i=(r("96cf"),r("8b2e")),u={props:{getCodeSuccessBack:{type:Function,default:null},getCodeErrorBack:{type:Function,default:null},phone:{type:String,default:""},params:{type:Object,default:function(){return{}}}},data:function(){return{codeTime:0,timerObj:1}},methods:{getPhoneCode:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a,o,u,s,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.successBack,a=void 0===n?t.getCodeSuccessBack:n,o=e.errorBack,u=void 0===o?t.getCodeErrorBack:o,s=t.phone,d=t.codeTime,!d){r.next=4;break}return r.abrupt("return");case 4:if(Object(i["a"])(s)){r.next=7;break}return"function"===typeof u&&u(),r.abrupt("return");case 7:return r.prev=7,t.codeTime=60,t.timerObj=setInterval((function(){t.codeTime--,t.codeTime||clearInterval(t.timerObj)}),1e3),r.next=12,t.$apis.userOperator.getPhoneCode(Object(c["a"])({phone:s},t.params));case 12:localStorage.setItem("getCodeTime",(new Date).getTime()),"function"===typeof a&&a(),r.next=19;break;case 16:r.prev=16,r.t0=r["catch"](7),"function"===typeof u&&u(r.t0);case 19:case"end":return r.stop()}}),r,null,[[7,16]])})))()}}},s=u,d=r("2877"),l=Object(d["a"])(s,n,a,!1,null,null,null);t["a"]=l.exports},"5d86":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("5530"),a=(r("ac1f"),r("841c"),r("ed08"));function c(){var e=location,t=e.protocol,r=e.host,c=e.hash,o=e.search,i=e.pathname;return Object(n["a"])(Object(n["a"])({},Object(a["e"])()),{},{protocol:t,host:r,link:i+o+c})}},6088:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("4360");function a(e){n["a"].$log.click({current_page:location.href,module_ori:e.module_ori,module_part:e.module_part})}},"649f":function(e,t,r){"use strict";r("6d47")},"6d47":function(e,t,r){},"8b2e":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("e17f");var n=r("2241");function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"手机号码有误，请重填";return e?!!/^[1]([3-9])[0-9]{9}$/.test(e)||(Object(n["a"])({message:t}),!1):(Object(n["a"])({message:"请填写手机号"}),!1)}},c9cf:function(e,t,r){},d69a:function(e,t,r){"use strict";var n=r("1da1"),a=(r("96cf"),r("4360"));t["a"]=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t||{},n=r.notUserInfo,c=r.notWxConfig,o=r.getTokenQuery,!localStorage.getItem("wxauth")){e.next=4;break}return e.next=4,a["a"].dispatch("user/getToken",o);case 4:if(n||a["a"].state.user.userInfo){e.next=7;break}return e.next=7,a["a"].dispatch("user/getUserInfo");case 7:if(c||a["a"].state.user.wxConfig){e.next=10;break}return e.next=10,a["a"].dispatch("user/getWxConfig");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},d8bd:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("BaseImgPage",{attrs:{"max-img":e.maxImg,"img-path":e.imgPath}},[[r("div",{staticClass:"page-GDTCartoon"},[r("VanField",{attrs:{clearable:"",placeholder:"您的手机号"},on:{click:e.checkOrderInWx},model:{value:e.phone,callback:function(t){e.phone="string"===typeof t?t.trim():t},expression:"phone"}}),r("div",{staticClass:"code-box mt__30"},[r("VanField",{attrs:{clearable:"",placeholder:"验证码"},on:{click:e.checkOrderInWx},model:{value:e.code,callback:function(t){e.code="string"===typeof t?t.trim():t},expression:"code"}}),r("CountDownBtn",{staticClass:"phone-code",attrs:{"get-code-success-back":e.getCodeSuccessBack,"get-code-error-back":e.getCodeErrorBack,phone:e.phone}})],1),r("div",{staticClass:"submit-btn",on:{click:e.submitClick}},[e._v("立即抢课")])],1),r("img",{attrs:{src:"http://wm-front-common.oss-cn-beijing.aliyuncs.com/wm-front-landing-page-mobile-custom/assets/GDTImmortal/end.jpg')"}})]],2)},a=[],c=(r("e17f"),r("2241")),o=r("1da1"),i=(r("ac1f"),r("5319"),r("caad"),r("96cf"),r("54b4")),u=r("4f6c"),s=r("d69a"),d=r("2744"),l=r("5d86"),p=r("4360"),f=r("6088"),m={components:{BaseImgPage:d["a"],CountDownBtn:i["a"]},beforeRouteEnter:function(e,t,r){return Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s["a"])({getTokenQuery:Object(l["a"])()});case 3:t=p["a"].state.user.userInfo||{},n=t.id,a=t.wx_body.openid,c=t.unionid,p["a"].$log.update({mid:n,openid:a,unionid:c}),r(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},data:function(){return{submitLoading:!1,maxImg:12,imgPath:"http://wm-front-common.oss-cn-beijing.aliyuncs.com/wm-front-landing-page-mobile-custom/assets/GDTImmortal",phone:"",code:""}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.checkOrderInWx(),"undefined"===typeof window.WeixinJSBridge&&(document.addEventListener?document.addEventListener("WeixinJSBridgeReady",e.inWxPay,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",e.inWxPay),document.attachEvent("onWeixinJSBridgeReady",e.inWxPay))),r=JSON.parse(localStorage.getItem("GDTImmortal-reset"))||{},n=r.phone,a=r.code,e.phone=n,e.code=a;case 5:case"end":return t.stop()}}),t)})))()},methods:{clickLog:f["a"],wxSubmitValed:u["d"],inWxPay:u["a"],checkOrderInWx:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["a"].$apis.payment.checkOrderInWx().catch((function(t){throw 30009===t.code&&e.$router.push({name:"BaiduPcTeacherQrCode"}),new Error(t.msg)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},getCodeSuccessBack:function(){Object(f["a"])({module_ori:"表单提交",module_part:"106_toufang_lcx_0146"})},getCodeErrorBack:function(){Object(f["a"])({module_ori:"表单错误模块",module_part:"106_toufang_lcx_0149"})},submitClick:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o,i,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$apis.userOperator.report(),t.prev=1,!e.submitLoading){t.next=4;break}return t.abrupt("return");case 4:return e.submitLoading=!0,Object(f["a"])({module_ori:"表单提交",module_part:"106_toufang_lcx_0147"}),t.next=8,e.checkOrderInWx();case 8:return r=e.phone,n=e.code,t.next=11,e.wxSubmitValed({phone:r,code:n});case 11:return t.next=13,e.inWxPay({phone:r,code:n});case 13:if(a=t.sent,localStorage.setItem("GDTImmortal-reset",JSON.stringify({phone:r,code:n})),"get_brand_wcpay_request:ok"!==a){t.next=19;break}return t.next=18,p["a"].dispatch("user/getUserInfo");case 18:e.$router.replace({name:"BaiduPcTeacherQrCode"});case 19:t.next=31;break;case 21:if(t.prev=21,t.t0=t["catch"](1),o={33001:"106_toufang_lcx_0148",33002:"106_toufang_lcx_0149",30009:"106_toufang_lcx_0150",30010:"106_toufang_lcx_0151"},i=t.t0.code,u=t.t0.msg,o[i]&&Object(f["a"])({module_ori:"表单错误模块",module_part:o[i]}),[33001,33002].includes(i)&&Object(c["a"])({message:u}),30009!==i){t.next=31;break}return t.next=30,p["a"].dispatch("user/getUserInfo");case 30:e.$router.replace({name:"BaiduPcTeacherQrCode"});case 31:return t.prev=31,e.submitLoading=!1,t.finish(31);case 34:case"end":return t.stop()}}),t,null,[[1,21,31,34]])})))()}}},g=m,h=(r("0151"),r("2877")),b=Object(h["a"])(g,n,a,!1,null,"a37fd0d4",null);t["default"]=b.exports}}]);
//# sourceMappingURL=GDTImmortal.fe0e1658.js.map